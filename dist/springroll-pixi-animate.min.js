/*! SpringRoll Pixi Animate 1.0.0 */
!function(){"use strict";!function(a){var b=function(a,b,c,d){this.dom=b,this.symbols=[],this.libName=c||"lib",this.id=a,this.parseSymbols(b.text,d),this.assets=[]},c=b.prototype;b.globalSymbols={},c.parseSymbols=function(a,b){for(var c=a.split(/[\(!]function\s*\(/),d=FlashArt.globalSymbols,e=0;e<c.length;++e)if(a=c[e]){var f=a.substring(a.indexOf(",")+1,a.indexOf(")")).trim();if(!f)return;for(var g,h=new RegExp("\\("+f+".(\\w+)\\s*=","g"),i=h.exec(a);i;)g=i[1],this.symbols.push(g),d[g]=this.id,i=h.exec(a)}},c.getAssetList=function(a){for(var b=window[this.libName],c={},d=0;d<a.length;++d){var e=b[a[d]];for(var f in e)c[f]=e[f]}return c},c.destroy=function(){this.dom.parentNode.removeChild(this.dom),this.dom=null;var a=FlashArt.globalSymbols,b=window[this.libName];this.symbols.forEach(function(c){delete a[c],delete b[c]}),this.symbols=null,this.assets.forEach(function(a){a.destroy()}),this.assets=null},namespace("springroll.pixi.animate").AnimateArt=b}(),function(){var a=include("springroll.Task"),b=include("springroll.pixi.animate.AnimateArt"),c=(include("springroll.pixi.TextureAtlas"),include("PIXI.Texture"),function(b){a.call(this,b,b.src),this.src=this.filter(b.src),this.libName="lib",this.stageIds=b.stageIds||[this.id],this.suppressWarnings=!!b.suppress}),d=extend(c,a);c.test=function(a){return a.src&&a.src.search(/\.js$/i)>-1&&"pixi"==a.type&&"springroll.pixi.animate.AnimateArt"==a.format},d.start=function(a){var c={_animate:this.src};this.load(c,function(c){var d=new b(this.id,c._animate,this.libName,this.suppressWarnings),e=d.getAssetList(this.stageIds),f=this.src.substring(0,this.src.lastIndexOf("/")+1),g=[];for(var h in e){var i=e[i],j={id:h,type:"pixi"};/\.(png|jpg|jpeg|webp)$/.test(i)?j.image=f+i:/\.json$/.test(i)?(j.src=f+i,j.format="springroll.pixi.animate.JSONAsset"):/\.txt$/.test(i)&&(j.src=f+i,j.format="springroll.pixi.animate.Shapes"),g.push(j)}this.load(g,function(b){for(var c in b)d.assets.push(b[c]);a(d)}.bind(this))}.bind(this))},namespace("springroll.pixi.animate").AnimateArtTask=c}(),function(){var a=include("PIXI.animate.ShapesCache"),b=function(b,c){this.id=b,a.add(b,c)};b.prototype.destroy=function(){a.remove(this.id)},namespace("springroll.pixi.animate").Shapes=b}(),function(){var a=include("springroll.LoadTask"),b=include("PIXI.Spritesheet"),c=include("springroll.pixi.animate.Shapes"),d=function(b){a.call(this,b,b.src)},e=(a.prototype,extend(d,a));d.test=function(a){return a.src&&a.src.search(/\.json$/i)>-1&&"pixi"==a.type&&"springroll.pixi.animate.JSONAsset"==a.format},e.start=function(a){this.load(this.src,function(d){if(d.frames&&d.meta&&d.meta.image){var e=this.src.substring(0,this.src.lastIndexOf("/")+1);this.load({image:e+d.meta.image,type:"pixi"},function(c){var e=new b(c.baseTexture,d);c.destroy(),e.parse(function(){a(e)})})}else a(new c(this.id,d))}.bind(this))},namespace("springroll.pixi.animate").JSONTask=d}(),function(){var a=include("springroll.LoadTask"),b=include("springroll.pixi.animate.Shapes"),c=function(b){a.call(this,b,b.src)},d=(a.prototype,extend(c,a));c.test=function(a){return a.src&&a.src.search(/\.(txt|json)$/i)>-1&&"pixi"==a.type&&"springroll.pixi.animate.Shapes"==a.format},d.start=function(a){this.load(this.src,function(c){a(new b(this.id,c))}.bind(this))},namespace("springroll.pixi.animate").ShapesTask=c}(),function(a){var b=include("PIXI.animate.MovieClip"),c=include("springroll.AnimatorInstance"),d=include("PIXI.animate.Animator"),e=include("springroll.Application"),f=function(){c.call(this),this.startTime=0,this.length=0,this.firstFrame=-1,this.lastFrame=-1};f.test=function(a){return a instanceof b},GenericMovieClipInstance.hasAnimation=function(a,b){if("*"==b&&!a.labelsMap[b])return!0;var c=-1,e=-1;d.STOP_LABEL,d.LOOP_LABEL;return c=instance.labelsMap[label],e=instance.labelsMap[label+d.STOP_LABEL],-1===e&&(e=instance.labelsMap[label+d.LOOP_LABEL]),c>=0&&e>0},GenericMovieClipInstance.getDuration=function(a,b){if(a.framerate||(a.framerate=e.instance.options.fps||15),"*"==b&&!a.labelsMap[b])return a.totalFrames/a.framerate*1e3;var c=-1,f=-1;d.STOP_LABEL,d.LOOP_LABEL;return c=instance.labelsMap[label],f=instance.labelsMap[label+d.STOP_LABEL],-1===f&&(f=instance.labelsMap[label+d.LOOP_LABEL]),c>=0&&f>0?(f-c)/a.framerate*1e3:0};var g=(c.prototype,c.extend(f,c));g.init=function(a){a.framerate||(a.framerate=e.instance.options.fps||15),a.selfAdvance=!1,this.clip=a,this.isLooping=!1,this.currentName=null,this.position=this.duration=0},g.beginAnim=function(b,c){var e=this.currentName=b.anim,f=-1,g=-1,h=!1;"*"!=anim||this.clip.labelsMap[anim]?(f=instance.labelsMap[e],(g=instance.labelsMap[e+d.STOP_LABEL])===a&&(g=instance.labelsMap[e+d.LOOP_LABEL],h=!0)):(f=0,g=this.clip.totalFrames-1,h=!!b.loop),this.firstFrame=f,this.lastFrame=g,this.length=g-f,this.isLooping=h;var i=this.clip.framerate;if(this.startTime=this.firstFrame/i,this.duration=this.length/i,c)this.position=0;else{var j=b.start||0;this.position=j<0?Math.random()*this.duration:j}this.clip.play(),this.clip.elapsedTime=this.startTime+this.position,this.clip.advance()},g.endAnim=function(){this.clip.gotoAndStop(this.lastFrame)},g.setPosition=function(a){this.position=a,this.clip.elapsedTime=this.startTime+a,this.clip.advance()},namespace("springroll.pixi.animate").MovieClipInstance=f}(),function(){(new(include("springroll.ApplicationPlugin"))).setup=function(){this.assetManager.register("springroll.pixi.animate.FlashArtTask",60),this.assetManager.register("springroll.pixi.animate.SpriteSheetTask",70),this.animator.register("springroll.pixi.animate.MovieClipInstance",10)}}();}();